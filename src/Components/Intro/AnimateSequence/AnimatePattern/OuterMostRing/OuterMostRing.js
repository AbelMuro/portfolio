import React, {useContext, useState} from 'react';
import {ContainerContext} from '!/Intro';
import {useViewBoxZoom} from '~/Hooks';
import {motion, useMotionValueEvent, useScroll, AnimatePresence, useTransform, useSpring} from 'framer-motion';
import * as styles from './styles.module.css';

//viewBox="0 0 206.40488 205.26718"

function OuterMostRing(){
    const [mount, setMount] = useState(true);
    const {MainContainerRef} = useContext(ContainerContext);
    const [viewBox] = useViewBoxZoom([0, 0.06], 1, 3.5, MainContainerRef);
    const {scrollYProgress} = useScroll(MainContainerRef);
    //const scale = useTransform(scrollYProgress, [0, 0.06], [1, 3])
    //const smoothScale = useSpring(scale, {stiffness: 150, damping: 80});

    useMotionValueEvent(scrollYProgress, 'change', (value) => {
        if(value > 0.06)
            setMount(false)
        else
            setMount(true)
    })

    return(
        <AnimatePresence>
            {
                mount &&
                <motion.svg 
                    id='outer most ring' 
                    className={styles.container} 
                    viewBox={viewBox} 
                    initial={{opacity: 1}}
                    exit={{opacity: 0, transition: {duration: 0.7}}}>
                    <defs>
                        <filter id='glowEffect'>
                            <feGaussianBlur in="SourceAlpha" stdDeviation="2" result="blur">
                                <animate attributeName="stdDeviation" values="2;0;2" dur="3s" repeatCount="indefinite" calcMode="linear"/>
                            </feGaussianBlur>
                            <feFlood floodColor="#0400ff" floodOpacity='0.5' result="color"/>
                            <feComposite in="color" in2="blur" operator="in" result="glow"/>
                            <feMerge>
                                <feMergeNode in="glow"/>
                                <feMergeNode in="SourceGraphic"/>
                            </feMerge>
                        </filter>
                        <path
                            id='textToPath'
                            d="
                                M 188.51967,102.63359
                                A 85.31723,85.31723 0 1,0 17.88521,102.63359
                                A 85.31723,85.31723 0 1,0 188.51967,102.63359
                            "
                            />
                    </defs>
                            {/* circle*/}
                            <circle filter={'url(#glowEffect)'}
                                id="path1"
                                cx="103.20244"
                                cy="102.63359"
                                r="85.31723"
                                fill="none"
                                stroke="#0400ff"
                                strokeWidth={11.3469}
                                strokeLinejoin="bevel"
                                strokeMiterlimit={0}
                                strokeDasharray="none"
                                strokeOpacity={1}
                                />

                            {/* top arrow*/}
                            <path filter={'url(#glowEffect)'}
                                id="path1887"
                                fill="#0400ff"
                                stroke="#0400ff"
                                d="m 103.20244,8.31636
                                    c 0.0865,0.140658 0.37702,0.0836 0.50813,0.05885
                                    0.49919,-0.0942 1.00037,-0.311268 1.48186,-0.47282
                                    0.57867,-0.19416 1.16291,-0.373977 1.74004,-0.57239
                                    0.30127,-0.103575 0.67399,-0.295766 0.99755,-0.277439
                                    0.28465,0.01612 0.59259,0.201209 0.85422,0.306765
                                    0.58974,0.23793 1.18125,0.472384 1.76969,0.713345
                                    0.47897,0.19614 0.98359,0.396923 1.48741,0.518129
                                    0.1432,0.03445 0.43185,0.109693 0.54286,-0.03321
                                    0.11473,-0.147671 -0.10512,-0.431929 -0.17579,-0.557161
                                    -0.2756,-0.488357 -0.56312,-0.96976 -0.8362,-1.459598
                                    -0.75978,-1.36287 -1.46369,-2.756522 -2.10851,-4.176496
                                    -0.20602,-0.453693 -0.4324,-0.900079 -0.62817,-1.358236
                                    -0.13967,-0.326863 -0.26226,-0.749487 -0.48678,-1.028237
                                    -0.16031,-0.199048 -0.38751,-0.13962 -0.53054,0.04342
                                    -0.2567,0.328514 -0.4363,0.788278 -0.61276,1.164993
                                    -0.84436,1.802601 -1.90512,3.524333 -2.93631,5.223956
                                    -0.28293,0.466334 -0.58229,0.922024 -0.87522,1.382082
                                    -0.0779,0.122409 -0.28745,0.367972 -0.19148,0.524041 z"
                                />
                            {/* top right arrow*/}
                            <path filter={'url(#glowEffect)'}
                                id="path1887-8"
                                fill="#0400ff"
                                stroke="#0400ff"
                                strokeWidth={0.67711}
                                d="m 169.86244,35.97359
                                    c -0.0364,0.105735 0.11827,0.233216 0.18755,0.291187
                                    0.2638,0.220746 0.59274,0.38973 0.88418,0.572273
                                    0.35027,0.219385 0.69541,0.447841 1.04723,0.664591
                                    0.18366,0.113141 0.44439,0.225603 0.57384,0.402794
                                    0.11387,0.155878 0.14934,0.396556 0.20653,0.578822
                                    0.1289,0.410843 0.26039,0.821124 0.38715,1.232588
                                    0.10318,0.334923 0.21494,0.685264 0.36801,1.000991
                                    0.0435,0.08973 0.12817,0.273117 0.25065,0.269805
                                    0.12658,-0.0034 0.18088,-0.240599 0.21605,-0.331393
                                    0.13699,-0.354121 0.26545,-0.711401 0.40451,-1.064757
                                    0.38669,-0.983219 0.8135,-1.950426 1.27951,-2.898009
                                    0.14888,-0.302764 0.28516,-0.613053 0.44075,-0.912386
                                    0.1111,-0.213512 0.27951,-0.459292 0.32892,-0.696555
                                    0.0353,-0.169411 -0.0934,-0.262774 -0.2507,-0.258969
                                    -0.2822,0.0068 -0.59998,0.110413 -0.87293,0.17995
                                    -1.30611,0.332738 -2.66289,0.517483 -3.99539,0.708206
                                    -0.36561,0.05233 -0.7327,0.09149 -1.09932,0.135888
                                    -0.0975,0.01185 -0.31607,0.0077 -0.3565,0.124986 z"
                                />
                            {/* right arrow*/}
                            <path filter={'url(#glowEffect)'}
                                id="path1887-7"
                                fill="#0400ff"
                                stroke="#0400ff"
                                d="m 197.51967,102.63359
                                    c -0.13862,0.0897 -0.0748,0.37886 -0.047,0.50936
                                    0.10573,0.49687 0.33434,0.9929 0.507,1.47052
                                    0.2075,0.57402 0.40079,1.15394 0.61251,1.72632
                                    0.11053,0.29879 0.31129,0.66696 0.30046,0.99086
                                    -0.01,0.28495 -0.18744,0.59709 -0.28691,0.86109
                                    -0.22421,0.59509 -0.44492,1.19187 -0.67219,1.78573
                                    -0.185,0.48338 -0.37405,0.99252 -0.48356,1.49901
                                    -0.0311,0.14396 -0.0997,0.43427 0.0457,0.54194
                                    0.15029,0.11128 0.42938,-0.11509 0.55294,-0.18864
                                    0.48185,-0.28683 0.95647,-0.58541 1.43986,-0.86976
                                    1.34491,-0.79112 2.7219,-1.5271 4.12657,-2.20462
                                    0.4488,-0.21647 0.88983,-0.45312 1.34333,-0.65944
                                    0.32355,-0.1472 0.74322,-0.27954 1.01669,-0.51045
                                    0.19529,-0.16488 0.13062,-0.39064 -0.0557,-0.52939
                                    -0.33436,-0.24903 -0.79816,-0.41794 -1.17886,-0.58563
                                    -1.82166,-0.80241 -3.56749,-1.82303 -5.29053,-2.81461
                                    -0.47275,-0.27206 -0.93525,-0.56079 -1.40196,-0.84299
                                    -0.12418,-0.075 -0.37453,-0.27885 -0.52834,-0.1793 z"
                                />
                            {/* bottom right arrow*/}
                            <path filter={'url(#glowEffect)'}
                                id="path1887-8-1"
                                fill="#0400ff"
                                stroke="#0400ff"
                                strokeWidth={0.67711}
                                d="m 169.86244,169.29359
                                    c -0.10573,-0.0364 -0.23321,0.11827 -0.29119,0.18755
                                    -0.22074,0.2638 -0.38973,0.59274 -0.57227,0.88418
                                    -0.21938,0.35027 -0.44784,0.69541 -0.66459,1.04723
                                    -0.11314,0.18366 -0.2256,0.44439 -0.40279,0.57384
                                    -0.15588,0.11387 -0.39656,0.14934 -0.57883,0.20653
                                    -0.41084,0.1289 -0.82112,0.26039 -1.23258,0.38715
                                    -0.33493,0.10318 -0.68527,0.21494 -1.00099,0.36801
                                    -0.0897,0.0435 -0.27312,0.12817 -0.26981,0.25065
                                    0.003,0.12658 0.2406,0.18088 0.33139,0.21605
                                    0.35412,0.13699 0.7114,0.26545 1.06476,0.40451
                                    0.98322,0.38669 1.95043,0.8135 2.89801,1.27951
                                    0.30276,0.14888 0.61305,0.28516 0.91239,0.44075
                                    0.21351,0.1111 0.45929,0.27951 0.69655,0.32892
                                    0.16941,0.0353 0.26277,-0.0934 0.25897,-0.2507
                                    -0.007,-0.2822 -0.11041,-0.59998 -0.17995,-0.87293
                                    -0.33274,-1.30611 -0.51748,-2.66289 -0.70821,-3.99539
                                    -0.0523,-0.36561 -0.0915,-0.7327 -0.13588,-1.09932
                                    -0.0119,-0.0975 -0.008,-0.31607 -0.12499,-0.3565 z"
                                />
                            {/* bottom arrow */}
                            <path filter={'url(#glowEffect)'}
                            id="path1887-7-8"
                            fill="#0400ff"
                            stroke="#0400ff"
                            d="m 103.20244,196.95082
                                c -0.0897,-0.13862 -0.37886,-0.0748 -0.50936,-0.047
                                -0.49687,0.10573 -0.9929,0.33434 -1.47052,0.507
                                -0.57402,0.2075 -1.15394,0.40079 -1.72632,0.61251
                                -0.29879,0.11053 -0.66696,0.31129 -0.99086,0.30046
                                -0.28495,-0.01 -0.59709,-0.18744 -0.86109,-0.28691
                                -0.59509,-0.22421 -1.19187,-0.44492 -1.78573,-0.67219
                                -0.48338,-0.185 -0.99252,-0.37405 -1.49901,-0.48356
                                -0.14396,-0.0311 -0.43427,-0.0997 -0.54194,0.0457
                                -0.11128,0.15029 0.11509,0.42938 0.18864,0.55294
                                0.28683,0.48185 0.58541,0.95647 0.86976,1.43986
                                0.79112,1.34491 1.5271,2.7219 2.20462,4.12657
                                0.21647,0.4488 0.45312,0.88983 0.65944,1.34333
                                0.1472,0.32355 0.27954,0.74322 0.51045,1.01669
                                0.16488,0.19529 0.39064,0.13062 0.52939,-0.0557
                                0.24903,-0.33436 0.41794,-0.79816 0.58563,-1.17886
                                0.80241,-1.82166 1.82303,-3.56749 2.81461,-5.29053
                                0.27206,-0.47275 0.56079,-0.93525 0.84299,-1.40196
                                0.075,-0.12418 0.27885,-0.37453 0.1793,-0.52834 z"
                            />

                            {/* bottom left arrow*/}
                            <path filter={'url(#glowEffect)'}
                            id="path1887-8-1-2"
                            fill="#0400ff"
                            stroke="#0400ff"
                            strokeWidth={0.67711}
                            d="m 36.54244,169.29359
                                c 0.0098,-0.1114 -0.171105,-0.19774 -0.25234,-0.23726
                                -0.309312,-0.15048 -0.669334,-0.235 -0.996239,-0.34172
                                -0.392893,-0.12827 -0.783001,-0.26659 -1.176763,-0.39192
                                -0.205552,-0.0654 -0.485727,-0.11157 -0.654148,-0.25224
                                -0.148155,-0.12375 -0.240717,-0.34874 -0.340245,-0.51179
                                -0.224332,-0.36753 -0.451041,-0.7339 -0.673446,-1.10255
                                -0.181036,-0.30008 -0.374119,-0.61305 -0.598926,-0.88244
                                -0.06388,-0.0765 -0.190354,-0.23406 -0.308406,-0.20126
                                -0.122107,0.0335 -0.1174,0.27717 -0.129595,0.37376
                                -0.04739,0.37673 -0.08573,0.75446 -0.135308,1.13095
                                -0.137714,1.04751 -0.318227,2.08918 -0.541521,3.12127
                                -0.07133,0.32976 -0.128615,0.66378 -0.207283,0.99184
                                -0.05623,0.23403 -0.160278,0.51321 -0.150908,0.75538
                                0.0067,0.17292 0.154113,0.23243 0.305836,0.19074
                                0.272151,-0.075 0.555537,-0.25208 0.803604,-0.3855
                                1.187042,-0.63841 2.459008,-1.14545 3.705966,-1.65243
                                0.342146,-0.13907 0.688894,-0.26579 1.033934,-0.39742
                                0.09174,-0.0351 0.304776,-0.0841 0.315747,-0.20741 z"
                            />

                            { /* right arrow*/}
                            <path filter={'url(#glowEffect)'}
                            id="path1887-7-6"
                            fill="#0400ff"
                            stroke="#0400ff"
                            d="m 8.88521,102.63359
                                c 0.13862,0.0897 0.0748,0.37886 0.047,0.50936
                                -0.10573,0.49687 -0.33434,0.9929 -0.507,1.47052
                                -0.2075,0.57402 -0.40079,1.15394 -0.61251,1.72632
                                -0.11053,0.29879 -0.31129,0.66696 -0.30046,0.99086
                                0.01,0.28495 0.18744,0.59709 0.28691,0.86109
                                0.22421,0.59509 0.44492,1.19187 0.67219,1.78573
                                0.185,0.48338 0.37405,0.99252 0.48356,1.49901
                                0.0311,0.14396 0.0997,0.43427 -0.0457,0.54194
                                -0.15029,0.11128 -0.42938,-0.11509 -0.55294,-0.18864
                                -0.48185,-0.28683 -0.95647,-0.58541 -1.43986,-0.86976
                                -1.34491,-0.79112 -2.7219,-1.5271 -4.12657,-2.20462
                                -0.4488,-0.21647 -0.88983,-0.45312 -1.34333,-0.65944
                                -0.32355,-0.1472 -0.74322,-0.27954 -1.01669,-0.51045
                                -0.19529,-0.16488 -0.13062,-0.39064 0.0557,-0.52939
                                0.33436,-0.24903 0.79816,-0.41794 1.17886,-0.58563
                                1.82166,-0.80241 3.56749,-1.82303 5.29053,-2.81461
                                0.47275,-0.27206 0.93525,-0.56079 1.40196,-0.84299
                                0.12418,-0.075 0.37453,-0.27885 0.52834,-0.1793 z"
                            />

                            {/* top right arrow*/}
                            <path filter={'url(#glowEffect)'}
                            id="path1887-8-5"
                            fill="#0400ff"
                            stroke="#0400ff"
                            strokeWidth={0.67711}
                            d="m 36.54244,35.97359
                                c 0.108957,0.02516 0.219593,-0.141972 0.270015,-0.216926
                                0.191998,-0.285405 0.325716,-0.630189 0.476834,-0.939095
                                0.181617,-0.37126 0.372791,-0.738365 0.551626,-1.110892
                                0.09335,-0.194468 0.177974,-0.465515 0.340682,-0.612757
                                0.143138,-0.129522 0.378797,-0.189925 0.554096,-0.265832
                                0.39514,-0.171088 0.789451,-0.344694 1.185433,-0.51372
                                0.32232,-0.137583 0.659078,-0.285309 0.957099,-0.470505
                                0.0847,-0.05263 0.258243,-0.155984 0.242162,-0.277449
                                -0.0166,-0.125533 -0.258169,-0.154772 -0.352138,-0.18027
                                -0.366488,-0.09927 -0.735227,-0.189727 -1.10117,-0.291136
                                -1.018218,-0.281926 -2.024699,-0.605424 -3.015757,-0.969957
                                -0.316652,-0.116457 -0.639474,-0.219597 -0.953415,-0.343086
                                -0.223944,-0.0882 -0.485964,-0.230031 -0.727089,-0.2544
                                -0.17217,-0.01742 -0.251586,0.120324 -0.23138,0.276367
                                0.03623,0.279948 0.17245,0.585174 0.270103,0.849372
                                0.467282,1.264234 0.792669,2.594311 1.121466,3.899617
                                0.09022,0.358149 0.167486,0.719144 0.249918,1.079125
                                0.02196,0.09573 0.04066,0.313539 0.161522,0.341503 z"
                            />

                            <text
                                xmlSpace="preserve"
                                fontSize="6.60px"
                                fontWeight="800"
                                fontFamily="PMingLiU-ExtB"
                                fill="#000000"
                                stroke="none"
                                strokeWidth="0"
                                id="text1873"
                                >
                                    <textPath
                                        xlinkHref="#textToPath"
                                        id="textPath1873"
                                    >
                                        <tspan
                                            id="tspan1873"
                                            fill="black"
                                            dy='2.3'
                                            >
                                            SALVE⋅AD⋅MVNDVM⋅MEVM⋅CREANDI⋅ET⋅EVOLVENDI⋅VBI⋅CONSILIVM⋅FIT⋅VERITAS⋅ET⋅VISIO⋅OMNIA⋅SVPERAT⋅ARS⋅ET⋅CREATIVITAS⋅FIUNT⋅GRADVVM⋅SVCCESSVS⋅
                                        </tspan>
                                    </textPath>
                            </text>
                </motion.svg>
            }

        </AnimatePresence>
    )
}

export default OuterMostRing;